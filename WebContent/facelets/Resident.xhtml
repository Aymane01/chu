<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Gestion de Grève</title>
</h:head>
<h:body>
	<ui:include src="included.xhtml" />
	<h:form id="form">
		<p:growl id="growl" showDetail="true" showSummary="false" life="6000"
			sticky="false" />
		<p:panel id="addPanel" header="Ajouter nouveau Résident"
			style="margin-bottom:5px;">

			<h:panelGrid columns="2">
				<p:outputLabel for="ppr" value="PPR :" />
				<p:inputText id="ppr" value="#{resident.ppr}" size="40"
					validatorMessage="Champs requis ou invalide : PPR ">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="cin" value="CIN :" />
				<p:inputText id="cin" value="#{resident.cin}" size="40"
					validatorMessage="Champs requis : CIN">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="nomFr" value="Nom et Prénom en Français :" />
				<p:inputText id="nomFr" value="#{resident.nomFr}" size="40"
					validatorMessage="Champs requis : Nom et Prénom en Français">
					<f:validateRequired />
				</p:inputText>

				<p:outputLabel for="nomCompletAr" value="Nom et Prénom en Arabe :" />
				<p:inputText id="nomCompletAr" value="#{resident.nomCompletAr}"
					size="40" validatorMessage="Champs requis : Nom et Prénom en Arabe">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="dateN" value="Date de naissance :" />
				<p:calendar id="dateN" value="#{resident.dateN}"
					pattern="yyyy-MM-dd" mask="true"
					validatorMessage="Champs requis : Date de naissance" effect="scale"
					converter="myDateConverter">

					<f:validateRequired />
				</p:calendar>
				<p:outputLabel for="sexe" value="Sexe :" />
				<p:selectOneRadio id="sexe" value="#{resident.sexe}"
					validatorMessage="Champs requis : Sexe">
					<f:selectItem itemLabel="Masculin" itemValue="Masculin" />
					<f:selectItem itemLabel="Feminin" itemValue="Feminin" />
					<f:validateRequired />
				</p:selectOneRadio>
				<p:outputLabel for="nationalite" value="Nationalité :" />
				<p:selectOneMenu id="nationalite"
					validatorMessage="Champs requis : Nationalité"
					value="#{resident.nationalite}" effect="scale">
					<f:selectItem itemLabel="MAROCAIN" itemValue="MAROCAIN"
						noSelectionOption="true" />
					<f:selectItems var="n" value="#{residentAction.nationalite}"
						itemValue="#{n}" itemLabel="#{n}" />
					<f:validateRequired />
				</p:selectOneMenu>
				<p:outputLabel for="dateArrive" value="Date d'arrivée au service:" />
				<p:calendar id="dateArrive" value="#{resident.dateArrive}"
					pattern="yyyy-MM-dd" mask="true"
					validatorMessage="Champs requis : Date d'arrivée" effect="scale"
					converter="myDateConverter">
					<f:validateRequired />

				</p:calendar>

				<p:outputLabel for="status" value="Status :" />
				<p:inputText id="status" value="#{resident.status}" size="40"
					validatorMessage="Champs requis : Status">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="type" value="Type :" />
				<p:inputText id="type" value="#{resident.type}" size="40"
					validatorMessage="Champs requis : Type">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="echelle" value="Echelle :" />
				<p:inputText id="echelle" value="#{resident.echelle}" size="40"
					validatorMessage="Champs requis : Echelle">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="echelon" value="Echelon :" />
				<p:inputText id="echelon" value="#{resident.echelon}" size="40"
					validatorMessage="Champs requis : Echelon">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="indice" value="Indice :" />
				<p:inputText id="indice" value="#{resident.indice}" size="40"
					validatorMessage="Champs requis : Indice">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="budget" value="Budget :" />
				<p:selectOneRadio id="budget" value="#{resident.budget}"
					validatorMessage="Champs requis : Budget">
					<f:selectItem itemLabel="Autonome" itemValue="Autonome" />
					<f:selectItem itemLabel="Générale" itemValue="Générale" />
					<f:validateRequired />
				</p:selectOneRadio>
				<p:outputLabel for="observation" value="Observation :" />
				<p:inputText id="observation" value="#{resident.observation}"
					size="40" validatorMessage="Champs requis : Observation">
					<f:validateRequired />
				</p:inputText>
				<p:outputLabel for="corps" value="Corps :" />
				<p:selectOneMenu required="true"
					requiredMessage="Veuillez seletionner un corps" effect="scale"
					id="corps" value="#{resident.corps.id}" style="width:420px">
					<f:selectItem itemLabel="Selectionner un corps"
						noSelectionOption="true"></f:selectItem>
					<f:selectItems var="c" value="#{corpsAction.corps}"
						itemLabel="#{c.intituleFr}" itemValue="#{c.id}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:outputLabel for="grade" value="Grade :" />
				<p:selectOneMenu required="true"
					requiredMessage="Veuillez seletionner un Grade" effect="scale"
					id="grade" value="#{resident.grade.idG}" style="width:420px">
					<f:selectItem itemLabel="Selectionner un grade"
						noSelectionOption="true"></f:selectItem>
					<f:selectItems var="g" value="#{gradeAction.grades}"
						itemLabel="#{g.intituleFr}" itemValue="#{g.idG}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:outputLabel for="cadre" value="Cadre :" />
				<p:selectOneMenu required="true"
					requiredMessage="Veuillez seletionner un Cadre" effect="scale"
					id="cadre" value="#{resident.cadre.id}" style="width:420px">
					<f:selectItem itemLabel="Selectionner un cadre"
						noSelectionOption="true"></f:selectItem>
					<f:selectItems var="ca" value="#{cadreAction.cadres}"
						itemLabel="#{ca.intituleFr}" itemValue="#{ca.id}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:outputLabel for="specialite" value="Spécialité :" />
				<p:selectOneMenu required="true"
					requiredMessage="Veuillez seletionner une spécialité"
					effect="scale" id="specialite" value="#{resident.specialite.idS}"
					style="width:420px">
					<f:selectItem itemLabel="Selectionner une spécialité"
						noSelectionOption="true"></f:selectItem>
					<f:selectItems var="sp" value="#{specialiteAction.specialites}"
						itemLabel="#{sp.intituleFr}" itemValue="#{sp.idS}">
					</f:selectItems>
				</p:selectOneMenu>
				<p:outputLabel for="hopital" value="Hopital :" />
				<p:selectOneMenu required="true"
					requiredMessage="Veuillez seletionner un hopital" effect="scale"
					id="hopital" value="#{hopitalAction.hopital.idH}"
					style="width:420px">
					<f:selectItem itemLabel="Selectionner un hopital"
						noSelectionOption="true"></f:selectItem>
					<f:selectItems var="h" value="#{hopitalAction.listHopital}"
						itemLabel="#{h.intituleFr}" itemValue="#{h.idH}">
					</f:selectItems>
					<p:ajax update="service"
						listener="#{hopitalAction.refreshListService}" process="@this" />
				</p:selectOneMenu>

				<p:outputLabel for="service" value="Service :" />
				<p:selectOneMenu required="true"
					requiredMessage="Veuillez seletionner un Service" effect="scale"
					id="service" value="#{resident.service.idSe}" style="width:420px">
					<f:selectItem itemLabel="Selectionner un Service"
						noSelectionOption="true"></f:selectItem>
					<f:selectItems var="s" value="#{hopitalAction.listService}"
						itemLabel="#{s.intituleFr}" itemValue="#{s.idSe}">
					</f:selectItems>
				</p:selectOneMenu>

			</h:panelGrid>
		</p:panel>
		<p:toolbar>
			<f:facet name="left">
				<p:commandButton value="Ajouter" icon="ui-icon-circle-check"
					actionListener="#{residentAction.addResident(resident)}"
					update="form">
				</p:commandButton>
				<p:commandButton value="Annuler" type="reset"
					icon="ui-icon-circle-minus">
				</p:commandButton>
			</f:facet>
		</p:toolbar>
	</h:form>

</h:body>
</html>